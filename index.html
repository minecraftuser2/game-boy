<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game Boy Emulator Online</title>
  <style>
    body { background: #222; color: #fff; text-align: center; }
    #gameboy, #snes-message { display: none; margin: 20px auto; }
    canvas { box-shadow: 0 0 10px #000; }
    label { font-size: 1.2em; }
    #hint { margin-bottom: 1em; }
  </style>
  <!-- GameBoy-Online core -->
  <script src="https://unpkg.com/gameboy-online@2.0.0-beta.2/js/GameBoyCore.js"></script>
  <script src="https://unpkg.com/gameboy-online@2.0.0-beta.2/js/GameBoyIO.js"></script>
</head>
<body>
  <h1>Emulator: Game Boy & SNES</h1>
  <label for="consoleSelect">Choose Console:</label>
  <select id="consoleSelect">
    <option value="gameboy">Game Boy</option>
    <option value="snes">SNES (not available)</option>
  </select>
  <br>
  <input type="file" id="romInput" accept=".gb">
  <p id="hint">
    <b>Instructions:</b><br>
    1. Select Game Boy and upload a <code>.gb</code> ROM file to start playing.<br>
    <i>No games are included on this page. Please use your own ROM files.</i><br>
    <b>Note:</b> SNES emulation is not available in this simple HTML setup.
  </p>
  <canvas id="gameboy" width="160" height="144"></canvas>
  <div id="snes-message">
    <p>
      <b>SNES emulation is not available in this demo.</b><br>
      In a single HTML file, browser-based SNES emulators cannot be loaded due to modern JavaScript module requirements.<br>
      If you want NES emulation, let me know and I can add that for you!
    </p>
  </div>
  <script>
    let gameboy = null;
    const gameboyCanvas = document.getElementById('gameboy');
    const snesMessage = document.getElementById('snes-message');
    const consoleSelect = document.getElementById('consoleSelect');
    const romInput = document.getElementById('romInput');
    const hint = document.getElementById('hint');

    function showConsole(consoleName) {
      if (consoleName === 'gameboy') {
        gameboyCanvas.style.display = 'block';
        snesMessage.style.display = 'none';
        romInput.accept = ".gb";
        hint.innerHTML = `
          <b>Instructions:</b><br>
          1. Select Game Boy and upload a <code>.gb</code> ROM file to start playing.<br>
          <i>No games are included on this page. Please use your own ROM files.</i><br>
          <b>Note:</b> SNES emulation is not available in this simple HTML setup.
        `;
      } else {
        gameboyCanvas.style.display = 'none';
        snesMessage.style.display = 'block';
        romInput.accept = "";
        hint.innerHTML = `
          <b>Instructions:</b><br>
          SNES emulation is not available in this demo.<br>
          In a single HTML file, browser-based SNES emulators cannot be loaded due to modern JavaScript module requirements.<br>
          If you want NES emulation, let me know and I can add that for you!
        `;
      }
    }

    function startGameBoyEmulator(romBuffer) {
      if (gameboy) gameboy.stop();
      gameboy = new GameBoyCore(gameboyCanvas, romBuffer);
      gameboy.start();
    }

    romInput.addEventListener('change', function(e){
      const file = e.target.files[0];
      if (!file) return;
      if (consoleSelect.value !== 'gameboy') {
        alert('SNES emulation is not available.');
        return;
      }
      const reader = new FileReader();
      reader.onload = function() {
        const arr = new Uint8Array(reader.result);
        startGameBoyEmulator(arr);
      };
      reader.readAsArrayBuffer(file);
    });

    consoleSelect.addEventListener('change', function() {
      showConsole(consoleSelect.value);
    });

    // Initial console setup
    showConsole('gameboy');
  </script>
</body>
</html>
